
## ğŸ¯ The real target: **Active Directory**

Letâ€™s align the facts:

### Domain

fries.htb
DC: dc01.fries.htb 
IP: 10.10.11.96`

### Open & relevant ports

- 88 â†’ Kerberos
- 389 â†’ LDAP
- 445 â†’ SMB
- 5985 â†’ WinRM
- 53 â†’ DNS

This screams:

> **Initial domain foothold via user enumeration â†’ password reuse â†’ AD abuse**

---

## âœ… What to do NEXT (very concrete)

### 1ï¸âƒ£ User enumeration via Kerberos (correct way)

You already tried AS-REP roasting, but users donâ€™t have pre-auth disabled. Thatâ€™s fine.

1. Use a list like and add it to `users.txt`: 

	administrator
	dale
	dcooper 
	d.cooper 
	cooper 
	service 
	backup 
	sql 
	web 
	gitea`

2. Now do **username validation** (this works even without passwords):

```
 sudo ~/tools/kerbrute_linux_amd64 userenum -d fries.htb --dc <MACHINE IP> users.txt
```

ğŸ“Œ Kerberos will tell you **which users exist**.!

![[kerbrute 1.png]]



---


## ğŸ” Current confirmed facts (very important)

### Active Directory

- Domain: **fries.htb**
    
- DC: **10.10.11.96**
    
- Users confirmed:
    
    - `administrator`
        
    - `d.cooper`
        
- Kerberos:
    
    - Pre-auth **enabled**
        
    - No AS-REP roasting
        
- SMB:
    
    - Signing enabled
        
    - No anonymous access
        

ğŸ‘‰ **AD is hardened** â€” AD is _not_ the entry point.

---
### Web layer (THIS is the entry point)

You have:

- `fries.htb` â†’ static restaurant site
    
- `code.fries.htb` â†’ **Gitea**
    
- Gitea **users exist**
    
- Login works
    
- No registration / password reset
    
- API is exposed
    
- CSRF token is present
    
- You found valid usernames via API
    

This screams:

> **Web auth weakness or token misuse, not password guessing**

---

## ğŸ¯ Why Hydra lied to you earlier (important)

Hydra output:

`1 valid password found`

But:

- You donâ€™t actually know the password
    
- Login still fails
    
- No session established
    

This usually happens when:

- The failure string is **wrong**
    
- Or login response is **always 200**
    
- Or CSRF token is required per request
    

ğŸ‘‰ **Hydra false positive** â€” common with Gitea.

---

## ğŸ”‘ CRITICAL: Gitea requires CSRF token per request

Your login POST must include:

- `_csrf` value
    
- Correct cookies
    
- Correct headers

Hydra **cannot handle this properly**.

So brute force â‰  viable.

**Next step:** [[Gitea API]]
