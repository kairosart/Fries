## ğŸ§  Real attack vector: **Gitea API misuse / auth bypass**

You already accessed:

`/swagger.v1.json`

Thatâ€™s gold.

---

## ğŸ” Step 1 â€” Enumerate Gitea version & config

Check:

```
curl http://code.fries.htb/api/v1/version
```

Expected:

`{"version":"1.22.6"}`

Ok

---

## ğŸ” Step 2 â€” Check unauthenticated API endpoints

#Attakiing_machine 
Run:

`curl http://code.fries.htb/api/v1/users`

You already did â€” users are visible without auth âœ”

Now check **tokens**:

`curl http://code.fries.htb/api/v1/users/dale/tokens`

and

`curl http://code.fries.htb/api/v1/users/administrator/tokens`

If tokens are exposed â†’ instant shell path.

You'll only get:

![[curltests.png]]

## ğŸ¯ The correct Gitea attack chain (HTB-style)

HTB loves this chain:

![[gitea_attack.png]]


---
## Enumerate API without auth

#Attakiing_machine 
```
curl http://code.fries.htb/api/v1/users/dale  
```

![[dale.png]]

Excellent â€” this response is **exactly** what we were hoping for.  
Youâ€™ve just confirmed a **real unauthenticated data leak** in Gitea.

Letâ€™s lock this in and move forward decisively.

---
## Try IDOR-style access (administrator)

#Attakiing_machine 
```
curl http://code.fries.htb/api/v1/users/administrator
```

![[admiinistrator.png]]

Perfect â€” this confirms it ğŸ’¥  
You have a **clean, reproducible unauthenticated IDOR on the Gitea API**.


## ğŸ”¥ What this confirms (very important)

You accessed:

`GET /api/v1/users/dale`

âœ… **WITHOUT authentication**

And received:

- Full user object
    
- Internal ID (`id: 2`)
    
- Account status flags
    
- Creation timestamp
    
- Username canonical form
    

This means:

> ğŸ”´ **The Gitea API is publicly readable for users**

Thatâ€™s **misconfigured** and **exploitable**.


---


## 1ï¸âƒ£ What `/api/v1/users/dale` actually is

`http://code.fries.htb/api/v1/users/dale`

This is a **public Gitea API endpoint**.

âœ… It **does NOT require authentication**  
âœ… It returns **public user metadata only**  
âŒ It will **never give you tokens, passwords, or repos**

Thatâ€™s why you can see:

- `login`
    
- `id`
    
- `email` (noreply)
    
- `is_admin: false`
    
- `active: false`
    

But **nothing sensitive**

So this endpoint is **working as intended**.

---

## 2ï¸âƒ£ Why this endpoint is NOT enough

Important distinction:

|Endpoint|Purpose|Needs token|
|---|---|---|
|`/api/v1/users/dale`|Public profile|âŒ No|
|`/api/v1/user`|_Who am I_|âœ… Yes|
|`/api/v1/user/repos`|Private repos|âœ… Yes|
|`/api/v1/admin/*`|Admin actions|âœ… Admin token|

â¡ï¸ All interesting stuff requires `/api/v1/user` to work

---

## 3ï¸âƒ£ Your real blocker right now

You **do not yet have a valid API token**.

Thatâ€™s why:

- Swagger says `token is required`
    
- `/api/v1/user` fails
    
- Admin routes reject you
    

The short token you tried earlier **is not a real Gitea token**.

---

## 4ï¸âƒ£ Critical realization (HTB trick)

You were **given valid AD creds**:

`d.cooper@fries.htb D4LE11maan!!`

But â—  
ğŸ‘‰ **These are NOT Gitea credentials**

This box separates:

- **Active Directory auth**
    
- **Gitea local auth**
    

So:

- AD login âŒ â†’ Kerberos / LDAP
    
- Gitea login âŒ â†’ different password
    

Thatâ€™s why:

- kinit fails
    
- ldap_bind fails
    
- Gitea login fails
    

This is **intentional**

---

## 5ï¸âƒ£ How this box is meant to be solved (important)

The intended path is:

![[squeme.png]]

You are **only at step 1**.

---

## 6ï¸âƒ£ What you should do NEXT (concrete steps)

### ğŸ” Step A â€” enumerate Gitea without auth

Run **all of these**:

`curl http://code.fries.htb/api/v1/version`

`curl http://code.fries.htb/api/v1/settings/api`

`curl http://code.fries.htb/api/v1/settings/server`

`curl http://code.fries.htb/api/v1/users/search?q=admin`

---

### ğŸ” Step B â€” search for repos globally (even if UI shows none)

`curl "http://code.fries.htb/api/v1/repos/search?q="`

and

`curl "http://code.fries.htb/api/v1/repos/search?limit=50"`

Gitea **often exposes repos via API even when UI hides them**.

---

### ğŸ” Step C â€” look for config or backup endpoints

Try:

`/.git /.git/config /app.ini /config /.env`

Example:

`curl http://code.fries.htb/app.ini`

---

## 7ï¸âƒ£ Very important hint ğŸš©

The box name is **Fries**

Expect:

- **careless dev**
    
- **misconfigured Gitea**
    
- **config file leak**
    
- **LDAP bind password in plain text**
    

Not brute force. Not Kerberos attacks.