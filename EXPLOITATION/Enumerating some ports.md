#Attakiing_machine 
Check the following ports.

```
nmap -p 3000,8000,8080,8443,5000 <MACHINE IP>
```

![[NMAP2 1.png]]

Good ‚Äî this actually tells us a lot üëç  
Filtered ‚â† closed, and on HTB that usually means **host-based firewall + reverse proxy**.

Let‚Äôs summarize cleanly and then pivot correctly.

---

## üîç Current Situation Summary

### Network & Services

- **80 / 443** ‚Üí nginx (Ubuntu)
    
- **53** ‚Üí DNS (authoritative for `fries.htb`)
    
- **AD services exposed** (LDAP, Kerberos, SMB) ‚Üí DC01.fries.htb
    
- **Gitea** ‚Üí `code.fries.htb` (running behind nginx, likely on 3000 internally)
    
- **3000 / 5000 / 8000 / 8080 / 8443** ‚Üí _filtered_ (firewalled, localhost-only)
    

‚û°Ô∏è Classic setup:

`nginx (reverse proxy) ‚Üí internal services (Gitea, APIs, admin panels)`

You will **not** access those ports directly.

---

## üö® Key Insight (Very Important)

If ports are **filtered**, HTB wants you to:

> **Reach the internal service THROUGH nginx**, not by scanning.

So the attack surface is:

- Virtual hosts
    
- Path-based routing
    
- Header-based routing
    
- Internal API exposure
    
- Trust of `X-Forwarded-*` headers


---

## üéØ What We Know for Sure

|Host|Purpose|
|---|---|
|`fries.htb`|Main website (restaurant)|
|`code.fries.htb`|Gitea (developer service)|
|`dc01.fries.htb`|Domain Controller|
|nginx|Fronting everything|

There is **almost certainly another vhost or internal path**.


---
## Path-based routing on nginx

#Attakiing_machine 
```
ffuf -u http://fries.htb/FUZZ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt
```

![[ffuf 1.png]]

Great ‚Äî that result is **clean and meaningful**. Let‚Äôs lock in what it tells us and where to go next.

---

### ‚úÖ What we know so far (Web Layer Summary)

#### Public routes on `fries.htb`

You‚Äôve confirmed these are **legitimate application routes**, not static junk:

|Path|Status|Notes|
|---|---|---|
|`/`|200|Main restaurant landing page|
|`/about`|200|Informational page|
|`/menu`|200|Dynamic content (larger size, more words)|

‚û°Ô∏è This confirms **fries.htb is a real web app**, not just a placeholder.

---

## üîç Key Observation (Important)

- All discovered paths return **200**
    
- No `/admin`, `/api`, `/dashboard` exposed publicly
    
- Strong indication of:
    
    - **Single-page app or server-side routing**
        
    - **Hidden endpoints only reachable via internal logic / JS / headers**
        

This matches perfectly with:

- nginx reverse proxy
    
- Internal services on filtered ports
    
- Gitea exposed only via `code.fries.htb`

## üéØ The Real Attack Surface Now

At this point, **directory brute-force is mostly done**.  
The next layers are:

### 1Ô∏è‚É£ JavaScript enumeration (VERY IMPORTANT)

The app almost certainly fetches data dynamically.

#Attakiing_machine 
Run:

```
curl -s http://fries.htb | grep -Eo 'src="[^"]+\.js"' | cut -d'"' -f2
```

![[curl.png]]

Perfect ‚Äî thanks, that command output is **exactly what we needed** üëç  
Now we move from **surface enumeration ‚Üí real vulnerability hunting**.


---
## üß† Interpretation of the JS files

You have **three JS sources**:

### 1Ô∏è‚É£ Bootstrap (CDN)

`bootstrap.bundle.min.js`

‚û°Ô∏è Ignore (framework only)

### 2Ô∏è‚É£ AOS (Animate On Scroll)

`aos.js`

‚û°Ô∏è Ignore (UI animation only)

### ‚≠ê 3Ô∏è‚É£ `/static/js/main.js` ‚Üê **THIS IS THE TARGET**

This is **custom application logic**.  
If there is:

- an API
    
- hidden endpoint
    
- admin call
    
- internal service
    
- HTMX request  
    ‚Ä¶it will be referenced here.
    

**Next step:** [[Active Directory]]